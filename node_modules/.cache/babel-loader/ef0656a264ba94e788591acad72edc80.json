{"ast":null,"code":"import _slicedToArray from\"/home/sim/Repos/DecentralizedWiki/decentralized-wikipedia/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Switch,Link,Route,useParams}from'react-router-dom';import*as Ethereum from'./services/Ethereum';import styles from'./App.module.css';import MediumEditor from'medium-editor';import'medium-editor/dist/css/medium-editor.css';import'medium-editor/dist/css/themes/default.css';var NewArticle=function NewArticle(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editor=_useState2[0],setEditor=_useState2[1];var contract=useSelector(function(_ref){var contract=_ref.contract;return contract;});useEffect(function(){setEditor(new MediumEditor(\".\".concat(styles.editable),{placeholder:{text:'Type your article'}}));},[setEditor]);var handleSubmit=function handleSubmit(event){alert(\"Content to send : \"+editor.getContent());//alert(\"Contract : \" + contract);\ncontract.methods.addArticle(2,\"test2\");};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.subTitle,children:\"New article\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.mediumWrapper,children:/*#__PURE__*/_jsx(\"textarea\",{className:styles.editable})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]});};var Home=function Home(){return/*#__PURE__*/_jsxs(\"div\",{className:styles.links,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/article/new\",children:\"Add an article\"}),/*#__PURE__*/_jsx(Link,{to:\"/article/all\",children:\"All articles\"})]});};var ReadArticle=function ReadArticle(){var _useParams=useParams(),id=_useParams.id;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var contract=useSelector(function(_ref2){var contract=_ref2.contract;return contract;});useEffect(function(){if(contract){contract.methods.articleContent(id).call().then(setContent);}},[contract,setContent,id]);return content;};var EditArticle=function EditArticle(){var _useParams2=useParams(),id=_useParams2.id;var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var contract=useSelector(function(_ref3){var contract=_ref3.contract;return contract;});useEffect(function(){if(contract){contract.methods.articleContent(id).call().then(setContent);}},[contract,setContent,id]);return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.subTitle,children:\"New article\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.mediumWrapper,children:/*#__PURE__*/_jsxs(\"textarea\",{className:styles.editable,children:[\" \",content,\" \"]})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]});};var AllArticles=function AllArticles(){var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),articles=_useState8[0],setArticles=_useState8[1];var contract=useSelector(function(_ref4){var contract=_ref4.contract;return contract;});useEffect(function(){if(contract){contract.methods.articleContent(0).call().then(alert);contract.methods.articleContent(1).call().then(alert);contract.methods.getAllIds().call().then(setArticles);}},[contract,setArticles]);//{articles.map(article => <Link to={`/article/${article}`} param={{articleId: {article}}}> Article {article} </Link> )}\nreturn/*#__PURE__*/_jsx(\"div\",{children:articles.map(function(article){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/article/read/\".concat(article),children:[\" Article \",article,\" \"]}),/*#__PURE__*/_jsx(Link,{to:\"/article/edit/\".concat(article),children:\" Edit \"})]});})});};var NotFound=function NotFound(){return/*#__PURE__*/_jsx(\"div\",{children:\"Not found\"});};var App=function App(){var dispatch=useDispatch();useEffect(function(){dispatch(Ethereum.connect);},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"Welcome to Decentralized Wikipedia\"}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/article/new\",children:/*#__PURE__*/_jsx(NewArticle,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/article/all\",children:/*#__PURE__*/_jsx(AllArticles,{})}),/*#__PURE__*/_jsx(Route,{name:\"read\",path:\"/article/read/:id\",component:ReadArticle}),/*#__PURE__*/_jsx(Route,{path:\"/article/edit/:id\",component:EditArticle}),/*#__PURE__*/_jsx(Route,{children:/*#__PURE__*/_jsx(NotFound,{})})]})]});};export default App;","map":{"version":3,"sources":["/home/sim/Repos/DecentralizedWiki/decentralized-wikipedia/src/App.js"],"names":["useEffect","useState","useDispatch","useSelector","Switch","Link","Route","useParams","Ethereum","styles","MediumEditor","NewArticle","editor","setEditor","contract","editable","placeholder","text","handleSubmit","event","alert","getContent","methods","addArticle","subTitle","mediumWrapper","Home","links","ReadArticle","id","content","setContent","articleContent","call","then","EditArticle","AllArticles","articles","setArticles","getAllIds","map","article","NotFound","App","dispatch","connect","app","title"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Switch, Link, Route, useParams } from 'react-router-dom'\nimport * as Ethereum from './services/Ethereum'\nimport styles from './App.module.css'\nimport MediumEditor from 'medium-editor'\nimport 'medium-editor/dist/css/medium-editor.css'\nimport 'medium-editor/dist/css/themes/default.css'\n\nconst NewArticle = () => {\n  const [editor, setEditor] = useState(null)\n  const contract = useSelector(({ contract }) => contract)\n  \n  useEffect(() => {\n    setEditor(new MediumEditor(`.${styles.editable}`, { placeholder : { text : 'Type your article'} }))\n  }, [setEditor])\n  \n  const handleSubmit = event => {\n\talert(\"Content to send : \" + editor.getContent());\n\t//alert(\"Contract : \" + contract);\n\tcontract.methods.addArticle(2, \"test2\");\n  }\n  \n return (\n    <form onSubmit={handleSubmit}>\n      <div className={styles.subTitle}>New article</div>\n      <div className={styles.mediumWrapper}>\n        <textarea className={styles.editable} />\n      </div>\n      <input type=\"submit\" value=\"Submit\" />\n    </form>\n  )\n}\n\nconst Home = () => {\n  return (\n    <div className={styles.links}>\n      <Link to=\"/\">Home</Link>\n      <Link to=\"/article/new\">Add an article</Link>\n      <Link to=\"/article/all\">All articles</Link>\n    </div>\n  )\n}\n\nconst ReadArticle = () => {\n  let { id } = useParams(); \n  const [content, setContent] = useState([])\n  const contract = useSelector(({ contract }) => contract)\n  useEffect(() => {\n    if (contract) {\n      contract.methods.articleContent(id).call().then(setContent)\n    }\n  }, [contract, setContent, id])\n  return content\n}\n\nconst EditArticle = () => {\n  let { id } = useParams(); \n  const [content, setContent] = useState([])\n  const contract = useSelector(({ contract }) => contract)\n  useEffect(() => {\n    if (contract) {\n      contract.methods.articleContent(id).call().then(setContent)\n    }\n  }, [contract, setContent, id])\n  \n  return (\n    <form>\n      <div className={styles.subTitle}>New article</div>\n      <div className={styles.mediumWrapper}>\n        <textarea className={styles.editable}> {content} </textarea>\n      </div>\n      <input type=\"submit\" value=\"Submit\" />\n    </form>\n  )\n}\n\n\nconst AllArticles = () => {\n  const [articles, setArticles] = useState([])\n  const contract = useSelector(({ contract }) => contract)\n  useEffect(() => {\n    if (contract) {\n      contract.methods.articleContent(0).call().then(alert);\n      contract.methods.articleContent(1).call().then(alert);\n      contract.methods.getAllIds().call().then(setArticles)\n      \n    }\n  }, [contract, setArticles])\n  \n  //{articles.map(article => <Link to={`/article/${article}`} param={{articleId: {article}}}> Article {article} </Link> )}\n  return <div>\n  \t{articles.map(article =>\n  \t  <div>\n  \t\t<Link to={`/article/read/${article}`}> Article {article} </Link>\n  \t\t<Link to={`/article/edit/${article}`}> Edit </Link>\n  \t  </div>\n  \t)}\n  </div>\n}\n\nconst NotFound = () => {\n  return <div>Not found</div>\n}\n\nconst App = () => {\n  const dispatch = useDispatch()\n  useEffect(() => {\n    dispatch(Ethereum.connect)\n  }, [dispatch])\n  return (\n    <div className={styles.app}>\n      <div className={styles.title}>Welcome to Decentralized Wikipedia</div>\n      <Switch>\n        <Route path=\"/article/new\">\n          <NewArticle />\n        </Route>\n        <Route exact path=\"/\">\n          <Home />\n        </Route>\n        <Route path=\"/article/all\">\n          <AllArticles />\n        </Route>\n        <Route name=\"read\" path=\"/article/read/:id\" component={ReadArticle}/>\n        <Route path=\"/article/edit/:id\" component={EditArticle}/>\n        <Route>\n          <NotFound />\n        </Route>\n      </Switch>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}